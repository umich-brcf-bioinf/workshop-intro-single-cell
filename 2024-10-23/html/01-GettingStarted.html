<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />


<meta name="author" content="UM Bioinformatics Core" />

<meta name="date" content="2024-09-24" />

<title>Getting Started with Seurat</title>

<script src="site_libs/header-attrs-2.28/header-attrs.js"></script>
<script src="site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/paper.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="site_libs/jqueryui-1.13.2/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<script src="site_libs/navigation-1.1/codefolding.js"></script>
<script src="site_libs/navigation-1.1/sourceembed.js"></script>
<link href="site_libs/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>
<script src="site_libs/clipboard-1.7.1/clipboard.min.js"></script>
<link href="site_libs/primer-tooltips-1.4.0/build.css" rel="stylesheet" />
<link href="site_libs/klippy-0.0.0.9500/css/klippy.min.css" rel="stylesheet" />
<script src="site_libs/klippy-0.0.0.9500/js/klippy.min.js"></script>
<!--
Favicon dervied from
https://twemoji.twitter.com/
https://favicon.io/emoji-favicons/dna/
-->
<link rel="apple-touch-icon" sizes="180x180" href="apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png">
<link rel="shortcut icon" href="favicon-16x16.png" />
<link rel="manifest" href="site.webmanifest">
<link rel="mask-icon" href="safari-pinned-tab.svg" color="#5bbad5">
<meta name="msapplication-TileColor" content="#da532c">
<meta name="theme-color" content="#ffffff">

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>

<style type="text/css">code{white-space: pre;}</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>




<style type="text/css">
#rmd-source-code {
  display: none;
}
</style>





<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
details > summary > p:only-child {
  display: inline;
}
pre code {
  padding: 0;
}
</style>


<style type="text/css">
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #adb5bd;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script type="text/javascript">
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark the anchor link active (and if it's in a dropdown, also mark that active)
  var dropdown = menuAnchor.closest('li.dropdown');
  if (window.bootstrap) { // Bootstrap 4+
    menuAnchor.addClass('active');
    dropdown.find('> .dropdown-toggle').addClass('active');
  } else { // Bootstrap 3
    menuAnchor.parent().addClass('active');
    dropdown.addClass('active');
  }

  // Navbar adjustments
  var navHeight = $(".navbar").first().height() + 15;
  var style = document.createElement('style');
  var pt = "padding-top: " + navHeight + "px; ";
  var mt = "margin-top: -" + navHeight + "px; ";
  var css = "";
  // offset scroll position for anchor links (for fixed navbar)
  for (var i = 1; i <= 6; i++) {
    css += ".section h" + i + "{ " + pt + mt + "}\n";
  }
  style.innerHTML = "body {" + pt + "padding-bottom: 40px; }\n" + css;
  document.head.appendChild(style);
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before, .tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "\e259";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "\e258";
  font-family: 'Glyphicons Halflings';
  border: none;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->
<style type="text/css">
.code-folding-btn { margin-bottom: 4px; }
</style>



<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}

@media print {
.toc-content {
  /* see https://github.com/w3c/csswg-drafts/issues/4434 */
  float: right;
}
}

.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
}

.tocify .list-group-item {
  border-radius: 0px;
}


</style>



</head>

<body>


<div class="container-fluid main-container">


<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="navbar navbar-inverse  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-bs-toggle="collapse" data-target="#navbar" data-bs-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">Intro to scRNA-Seq</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="workshop_intro.html">Intro</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Day 1
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="00A-OrientingOnScRNASeq.html">Orienting on scRNA-Seq</a>
    </li>
    <li>
      <a href="01-GettingStarted.html">Getting Started with Seurat</a>
    </li>
    <li>
      <a href="00B-CellRangerInAction.html">Cell Ranger in Action</a>
    </li>
    <li>
      <a href="02-QCandFiltering.html">Secondary QC &amp; Filtering</a>
    </li>
    <li>
      <a href="03-Normalization.html">Normalization</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Day 2
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="04-PCAandIntegration.html">PCA &amp; Integration</a>
    </li>
    <li>
      <a href="05-ProjectionAndClustering.html">Projection &amp; Clustering</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Day 3
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="06-MarkerVisualization.html">Marker identification and visualization</a>
    </li>
    <li>
      <a href="07-CellTypeAnnos.html">Cell type annotation</a>
    </li>
    <li>
      <a href="08-DifferentialExpression.html">Differential expression analysis</a>
    </li>
  </ul>
</li>
<li>
  <a href="workshop_wrap_up.html">Wrap up</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div id="header">

<div class="btn-group pull-right float-right">
<button type="button" class="btn btn-default btn-xs btn-secondary btn-sm dropdown-toggle" data-toggle="dropdown" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span>Code</span> <span class="caret"></span></button>
<ul class="dropdown-menu dropdown-menu-right" style="min-width: 50px;">
<li><a id="rmd-download-source" href="#">Download Rmd</a></li>
</ul>
</div>



<h1 class="title toc-ignore">Getting Started with Seurat</h1>
<h4 class="author">UM Bioinformatics Core</h4>
<h4 class="date">2024-09-24</h4>

</div>


<style type="text/css">
body, td {
   font-size: 18px;
}
code.r{
  font-size: 12px;
}
pre {
  font-size: 12px
}

table{
   width:100%;
}
</style>
<script>
  addClassKlippyTo("pre.r, pre.markdown, pre.bash");
  addKlippy('right', 'top', 'auto', '1', 'Copy code', 'Copied!');
</script>
<div id="workflow-overview" class="section level1 unlisted unnumbered">
<h1 class="unlisted unnumbered">Workflow Overview</h1>
<p><br/>
<img src="images/wayfinder/wayfinder.png" alt="wayfinder" style="height: 400px;"/>
<br/> <br/></p>
</div>
<div id="introduction" class="section level1">
<h1>Introduction</h1>
<p>The field of single-cell expression measurements is still relatively
new
<!-- add links to early publications & information regarding 10x commercialization -->
and therefore best practices for analysis and standards for publication
are continuing to evolve.</p>
<p>One of the goals of this workshop is to not only provide an example
of a start to end single-cell workflow but also explore some of the
relatively arbitrary decision points and the rationale for the choices
we included in our analysis.</p>
<div id="sample-information" class="section level2">
<h2>Sample information</h2>
<p>In this workshop, we will be working with single-cell RNA-seq data
from mice where the goal is to understand misregulation in wound healing
that can lead to bone formation in soft tissue. Of interest are the cell
types and genes that are involved in that misregulation. Essentially,
“Why might bone form at the injury sight when it shouldn’t?”</p>
<p>To investigate this, cells from day 0 (prior to injury), and days 3,
7, and 21 post-injury were subjected to scRNA-seq in quadruplicate for
each day. In the interest of computational constraints in this workshop,
we have omitted day 3.</p>
<p><img src="images/curriculum/experimental_design.jpg" /></p>
</div>
<div id="objectives" class="section level2">
<h2>Objectives</h2>
<ul>
<li>Orient on RStudio.</li>
<li>Create RStudio project for analysis.</li>
<li>Create directory structure for analysis.</li>
<li>Learn how to read 10X data into Seurat.</li>
<li>Introduce the Seurat object, and how to access parts of it.</li>
</ul>
<hr />
</div>
</div>
<div id="orienting-on-rstudio" class="section level1">
<h1>Orienting on RStudio</h1>
<p>To orient ourselves on the interface of RStudio, look in the lower
right pane, that has a list of files and folders. Click on the
<code>welcome.R</code> script.</p>
<p>There should now be four panes in your RStudio window, with the
<code>welcome.R</code> script in the upper left pane, this is the
“Source” or “Scripts” pane. It displays the code that we will write to
perform our analysis.</p>
<!-- Insert screenshot with welcome.R in script pane. -->
<p>In the Scripts pane, there is a line of icons, towards the right side
of the pane there is a “Run” button. First highlight all the code in the
Source pane, and then click “Run”.</p>
<!-- Insert screenshot of the result of running welcome.R -->
<p><strong>Checkpoint</strong></p>
<p>A number of things just happened in all the panes:</p>
<ol style="list-style-type: decimal">
<li>There is a record of the code that was run along with the results in
the lower left pane. This is the “Console” panel, and here is where the
output of executing code is displayed. You can also type directly in the
prompt and execute code, but it is not saved in the script.</li>
<li>There is a <code>phenotypes_by_species</code> object listed in the
upper right pane. This is the “Environment” panel, and it shows all the
existing variables in the session, as well as a brief description.</li>
<li>There is a plot in the lower right pane where the file structure was
previously listed. This is the “Files / Plots / Help” pane, and it can
show the file browser that we saw at the start, display plots that are
executed in the Console, or display help pages as we’ll see later.</li>
</ol>
</div>
<div id="project-setup" class="section level1">
<h1>Project setup</h1>
<p>To start, we will access our shared RStudio server by opening a web
browser to the following URL:</p>
<p><a
href="https://bfx-workshop02.med.umich.edu/">https://bfx-workshop02.med.umich.edu/</a></p>
<p>You should now be looking at a page that will allow you to login to
the RStudio server:</p>
<div class="float">
<img src="images/curriculum/server_login.png"
alt="Image: Login page for RStudio server." />
<div class="figcaption">Image: Login page for RStudio server.</div>
</div>
<p>Enter your user credentials and click <kbd>Sign In</kbd>. Your
username and password were provided via email, but if you need help, a
helper can retrieve it for you if you ask in Slack. Once logged in, you
should now see the RStudio interface:</p>
<div class="float">
<img src="images/curriculum/rstudio_landing.png"
alt="Image: Landing page after successful login to RStudio server." />
<div class="figcaption">Image: Landing page after successful login to
RStudio server.</div>
</div>
<!-- consider adding welcome script or example of final goal?-->
<div id="creating-a-project" class="section level2">
<h2>Creating a project</h2>
<p>We will create an RStudio Project that will help us keep our files
organized. See the <a
href="https://r4ds.hadley.nz/workflow-scripts.html#projects">Projects</a>
section of <a href="https://r4ds.hadley.nz/">R for Data Science</a> for
a more in-depth description of what a project is and how it’s
helpful.</p>
<p>To create a Project for this workshop, click <kbd>File</kbd> then
<kbd>New Project…</kbd>. In the New Project Wizard window that opens,
select <kbd>Existing Directory</kbd>, then <kbd>Browse…</kbd>. In the
Choose Directory window, select the <code>ISC_R</code> folder by
clicking it once, and then click the <kbd>Choose</kbd> button. Finally,
click <kbd>Create Project</kbd>.</p>
<p>Once we do this, RStudio will restart and the Files pane (lower
right) should put us in the <code>~/ISC_R</code> folder where there is
an <code>inputs/</code> folder and an <code>ISC_R.Rproj</code> file.</p>
</div>
<div id="directory-structure" class="section level2">
<h2>Directory structure</h2>
<p>We have included the data to be used in the workshop in the
<code>inputs/</code> folder. However, the project will need to include
folders for our analysis and our analysis scripts. Let’s create that
directory structure with the <code>dir.create()</code> function.</p>
<pre class="r"><code># create project directories ----------------------------------------------
dir.create(&#39;scripts&#39;, showWarnings = FALSE, recursive = TRUE)
dir.create(&#39;results/figures&#39;, showWarnings = FALSE, recursive = TRUE)
dir.create(&#39;results/tables&#39;, showWarnings = FALSE, recursive = TRUE)
dir.create(&#39;results/rdata&#39;, showWarnings = FALSE, recursive = TRUE)</code></pre>
<p>In the Files pane we should see the new <code>results/</code> and
<code>scripts/</code> folders.</p>
</div>
<div id="analysis-script" class="section level2">
<h2>Analysis script</h2>
<p>The two most important artifacts of our analysis are the data from
Cell Ranger, and the script to analyze the data. There will be outputs
in <code>results/</code>, and these will be important, but if the
contents of <code>results/</code> are ever lost, the script will be able
to re-generate them if we’ve captured all our steps as code, which we
aim to do.</p>
<p>To create the analysis script, click <kbd>File</kbd>, hover over
<kbd>New File</kbd>, and click on <kbd>R Script</kbd>. A new pane in the
upper left slides into view and is the Untitled script file. Save this
file, and name it, by clicking <kbd>File</kbd> then <kbd>Save</kbd>.
Double click the <code>scripts/</code> folder, and in the File name:
text box type “analysis.R”. Then click <kbd>Save</kbd>.</p>
<p>As we proceed through the workshop, we should save this file (by
clicking the Floppy disk, clicking <kbd>File</kbd> then <kbd>Save</kbd>,
or by typing <kbd>Control + S</kbd>).</p>
<blockquote>
<p><strong>Good scripting practices</strong></p>
<p>In any analysis script, we recommend using comments (lines preceded
by a “#”) to provide additional information about code that may not be
self-evident. This is to the benefit of others that may look at the
code, but also to your future-self. <br></p>
</blockquote>
</div>
</div>
<div id="analysis-initialization" class="section level1">
<h1>Analysis initialization</h1>
<p>We begin our analysis script by loading the libraries we expect to
use. It’s generally good practice to include all <code>library()</code>
calls at the top of a script for visibility.</p>
<pre class="r"><code># load libraries  ----------------------------------------------
library(Seurat)
library(BPCells)
library(tidyverse)

options(future.globals.maxSize = 1e9)</code></pre>
<p>The libraries that we are loading are:</p>
<ul>
<li>The <code>Seurat</code> library, developed by the <a
href="https://satijalab.org/">Satija lab</a>, which will provide the
essential functions used in our single-cell analysis. The <a
href="https://satijalab.org/seurat/">Seurat documentation</a> is
extensive and indispensible.</li>
<li>The <code>BPCells</code> library, developed by <a
href="https://bnprks.github.io/BPCells/authors.html#citation">Benjamin
Parks</a>, is a recent package with the primary goal of efficiently
storing single-cell data to reduce its memory footprint. The <a
href="https://bnprks.github.io/BPCells/index.html">BPCells
documentation</a> includes many useful tutorials.</li>
<li>The <code>tidyverse</code> library, developed by Posit, is an
essential package for data manipulation and plotting. The <a
href="https://www.tidyverse.org/">tidyverse documentation</a> is
essential for getting a handle on the array of functions in the many
packages contained therein.</li>
</ul>
</div>
<div id="input-data" class="section level1">
<h1>Input data</h1>
<p>The <code>inputs/</code> folder has the data for the workshop stored
in two forms. The first, <code>inputs/10x_filtered/</code> is closer to
what AGC would generate with Cell Ranger, where each sample has a
folder, and within that folder there are three files:</p>
<ul>
<li><code>barcodes.tsv.gz</code></li>
<li><code>features.tsv.gz</code></li>
<li><code>matrix.mtx.gz</code></li>
</ul>
<p>Note, we will be using the filtered matrices.</p>
<!-- Were these files explained earlier? If not, briefly explain them here -->
<p>The second, <code>inputs/10x_mat_filtered/</code> is the result of
the <code>BPCells</code> package, and is more machine-readable than
human-readable. It is an efficient way of storing the same data
contained in the three files above. We will use this form of the input
data because it is more memory efficient.</p>
<p>While the full dataset we selected has time-series information from
Day 0, Day 3, Day 7, and Day 21, we have removed Day 3 to reduce the
memory requirements further.</p>
<!-- Add context for expected 10x outputs and how we would usually start with the "filtered" outputs (and add dropdown or link out to 10x resources to contrast between filtered and raw outputs and use cases for each) -->
</div>
<div id="create-a-seurat-object" class="section level1">
<h1>Create a Seurat object</h1>
<p>The most recent release of <code>Seurat</code>, version 5, includes
changes which take advantage of the memory-efficient storage implemented
in <code>BPCells</code>. To read the efficiently stored data with
<code>BPCells</code> we will use the <code>open_matrix_dir()</code>
function.</p>
<!-- Introduce BPCell package and how most recent version of Seurat (Seurat 5) supports more efficient data storage to improve performance and accomodate larger datasets -->
<pre class="r"><code># This puts the data &quot;on disk&quot; rather than in memory&quot;  ------
geo_mat = open_matrix_dir(dir = &#39;inputs/10x_mat_filtered&#39;)</code></pre>
<p>This reads in the expression matrix which has genes as rows and cells
as columns. The expression matrix is the precursor to creating the
<code>Seurat</code> object upon which all our analysis will be done. To
create the <code>Seurat</code> object:</p>
<pre class="r"><code># create seurat object  ----------------------------------------------
geo_so = CreateSeuratObject(counts = geo_mat, min.cells = 1, min.features = 50)
geo_so</code></pre>
<pre><code>An object of class Seurat 
26489 features across 35216 samples within 1 assay 
Active assay: RNA (26489 features, 0 variable features)
 1 layer present: counts</code></pre>
<p>We have specified some parameters to remove genes and cells which do
not contain very much information. Specifically a gene is removed if it
is expressed in 1 or fewer cells, and a cell is removed if it contains
reads for 50 or fewer genes. In the context of this workshop, this helps
us minimize memory usage.</p>
<details>
<summary>
<em>Reading in data from scratch</em>
</summary>
<p>Above, we’ve demonstrated how to read data that was already arranged
in the <code>BPCells</code> manner. We have done this for the workshop
to reduce our memory footprint from the start, but when you get data
back from AGC, you will have to follow the steps below.</p>
<pre><code># To load data from raw files ----------------------------------------------
### DO NOT RUN ###

# Collect the directories containing the 3 files:
# barcodes.tsv.gz, features.tsv.gz, matrix.mtx.gz
# The [-1] drops the parent directory inputs/10x_analysis
sample_dirs = list.dirs(&#39;inputs/10x_analysis&#39;)[-1]

# Extract the sample names. NOTE, this will differ depending
# on the form the folder names take, this works for this data.
# We create a named vector 
samples = str_split(basename(sample_dirs), pattern = &#39;_&#39;, simplify = TRUE)[,2]

# Naming the sample_dirs vector makes Seurat name the
# samples in the corresponding manner, which is nice for us.
names(sample_dirs) = samples

# Create the expression matrix
geo_mat = Read10X(data.dir = sample_dirs)</code></pre>
<p>This will generate the expression matrix that is the input to
<code>CreateSeuratObject()</code>, as above. If you wanted to write this
expression matrix using <code>BPCells</code> so that it could be used in
the more memory-efficient manner, you would do:</p>
<pre><code>write_matrix_dir(mat = geo_mat, dir = &#39;inputs/10x_mat_filtered&#39;)</code></pre>
You’d then have the items needed to run the code we’ve already run.
</details>
<p><br></p>
<div id="structure-of-a-seurat-object" class="section level2">
<h2>Structure of a Seurat object</h2>
<p>The <code>Seurat</code> object is a complex data type, so let’s get a
birds eye view with an image from <a
href="https://swbioinf.github.io/scRNAseqInR_Doco/seuratobject.html#discussion-the-seurat-object-in-r">this
tutorial</a> on single-cell analysis.</p>
<div class="float">
<img src="images/curriculum/seurat_object.png"
alt="Image: Schematic of Seurat object." />
<div class="figcaption">Image: Schematic of <code>Seurat</code>
object.</div>
</div>
<p>The three main “slots” in the object are:</p>
<ol style="list-style-type: decimal">
<li>The <code>assays</code> slot stores the expression data as
<code>Assay</code> objects.</li>
<li>The <code>meta.data</code> slot which stores cell-level information,
including technical and phenotypic data.</li>
<li>The <code>reductions</code> slot stores the results of dimension
reduction applied to the <code>assays</code>.</li>
</ol>
<p>There are other slots which store information that becomes relevant
when identifying clusters of cells: <code>graphs</code> and
<code>neighbors</code>. There are slots related to spatial analysis:
<code>images</code>. There are also slots which track what has been done
to the object: <code>commands</code>.</p>
<div id="layers-of-a-seurat-object" class="section level3">
<h3>Layers of a Seurat object</h3>
<p>The <code>assays</code> in a Seurat v5 object store data in layers.
Layers can store raw, un-normalized counts
(<code>layer = 'counts'</code>), normalized data
(<code>layer = 'data'</code>), or z-scored/variance-stabilized data
(<code>layer = 'scale.data'</code>). We will come back to the idea of
these layers when we perform normalization and variance-stabilization
later.</p>
<p>As in bulk RNA-seq, the data of interest is stored as a count
matrices, but instead of the counts being at the sample level, they are
the <strong>cell</strong> level.</p>
</div>
</div>
<div id="accessing-parts-of-the-object" class="section level2">
<h2>Accessing parts of the object</h2>
<p>The only slot of the <code>Seurat</code> object that we’ll typically
access or modify by hand–that is, without a function from the
<code>Seurat</code> package–is the <code>meta.data</code> object. In R,
slots are accessed with the <code>@</code> symbol, as in:</p>
<pre class="r"><code># Examine seurat object ----------------------------------------------
head(geo_so@meta.data)</code></pre>
<pre><code>                                          orig.ident nCount_RNA nFeature_RNA
HODay0replicate1_AAACCTGAGAGAACAG-1 HODay0replicate1      10234         3226
HODay0replicate1_AAACCTGGTCATGCAT-1 HODay0replicate1       3158         1499
HODay0replicate1_AAACCTGTCAGAGCTT-1 HODay0replicate1      13464         4102
HODay0replicate1_AAACGGGAGAGACTTA-1 HODay0replicate1        577          346
HODay0replicate1_AAACGGGAGGCCCGTT-1 HODay0replicate1       1189          629
HODay0replicate1_AAACGGGCAACTGGCC-1 HODay0replicate1       7726         2602</code></pre>
<p>Here, each row is a cell, and each column is information about that
cell. The rows of the table are named according to the uniquely
identifiable name for the cell. In this case, the day and replicate, as
well as the barcode for that cell. As we continue the workshop, we will
check in on the <code>meta.data</code> slot and observe changes we want
to make, and that other functions will make. We’ll also observe the
other assays and layers and note their changes.</p>
</div>
</div>
<div id="save-our-progress" class="section level1">
<h1>Save our progress</h1>
<p>Let’s Save our progress as an RDS file with <code>saveRDS()</code>;
this allows us to have a copy of the object that we can read back into
our session with the <code>readRDS()</code> commmand. Periodically we
will be saving our Seurat object so that we can have a version of it at
different steps of the analysis. These will also help us get untangled
if we get into an odd state.</p>
<pre class="r"><code># Save the seurat object ----------------------------------------------
saveRDS(geo_so, file = &#39;results/rdata/geo_so_unfiltered.rds&#39;)</code></pre>
</div>
<div id="summary" class="section level1">
<h1>Summary</h1>
<p>In this section we:</p>
<ul>
<li>Created an RStudio project for analysis.</li>
<li>Created the directory structure for analysis.</li>
<li>Learned how to read 10X data into Seurat.</li>
<li>Introduced the Seurat object, and how to access parts of it.</li>
</ul>
<hr />
<p>These materials have been adapted and extended from materials listed
above. These are open access materials distributed under the terms of
the <a href="http://creativecommons.org/licenses/by/4.0/">Creative
Commons Attribution license (CC BY 4.0)</a>, which permits unrestricted
use, distribution, and reproduction in any medium, provided the original
author and source are credited.</p>
<p><br/> <br/></p>
<hr />
<table style="width:100%;">
<colgroup>
<col width="28%" />
<col width="42%" />
<col width="28%" />
</colgroup>
<thead>
<tr class="header">
<th align="left"><a href="00A-OrientingOnScRNASeq.html">Previous
lesson</a></th>
<th align="center"><a href="#top">Top of this lesson</a></th>
<th align="right"><a href="00B-CellRangerInAction.html">Next
lesson</a></th>
</tr>
</thead>
<tbody>
</tbody>
</table>
</div>

<div id="rmd-source-code">LS0tCnRpdGxlOiAiR2V0dGluZyBTdGFydGVkIHdpdGggU2V1cmF0IgphdXRob3I6ICJVTSBCaW9pbmZvcm1hdGljcyBDb3JlIgpkYXRlOiAiYHIgU3lzLkRhdGUoKWAiCm91dHB1dDoKICAgICAgICBodG1sX2RvY3VtZW50OgogICAgICAgICAgICBpbmNsdWRlczoKICAgICAgICAgICAgICAgIGluX2hlYWRlcjogaGVhZGVyLmh0bWwKICAgICAgICAgICAgdGhlbWU6IHBhcGVyCiAgICAgICAgICAgIHRvYzogdHJ1ZQogICAgICAgICAgICB0b2NfZGVwdGg6IDQKICAgICAgICAgICAgdG9jX2Zsb2F0OiB0cnVlCiAgICAgICAgICAgIG51bWJlcl9zZWN0aW9uczogZmFsc2UKICAgICAgICAgICAgZmlnX2NhcHRpb246IHRydWUKICAgICAgICAgICAgbWFya2Rvd246IEdGTQogICAgICAgICAgICBjb2RlX2Rvd25sb2FkOiB0cnVlCi0tLQoKPHN0eWxlIHR5cGU9InRleHQvY3NzIj4KYm9keSwgdGQgewogICBmb250LXNpemU6IDE4cHg7Cn0KY29kZS5yewogIGZvbnQtc2l6ZTogMTJweDsKfQpwcmUgewogIGZvbnQtc2l6ZTogMTJweAp9Cgp0YWJsZXsKICAgd2lkdGg6MTAwJTsKfQo8L3N0eWxlPgoKYGBge3Iga2xpcHB5LCBlY2hvPUZBTFNFLCBpbmNsdWRlPVRSVUV9CmtsaXBweTo6a2xpcHB5KGxhbmcgPSBjKCJyIiwgIm1hcmtkb3duIiwgImJhc2giKSwgcG9zaXRpb24gPSBjKCJ0b3AiLCAicmlnaHQiKSkKYGBgCgpgYGB7ciwgaW5jbHVkZSA9IEZBTFNFfQpzb3VyY2UoIi4uL2Jpbi9jaHVuay1vcHRpb25zLlIiKQprbml0cl9maWdfcGF0aCgiMDEtR2V0dGluZ1N0YXJ0ZWQvMDEtIikKYGBgCgojIFdvcmtmbG93IE92ZXJ2aWV3IHsudW5saXN0ZWQgLnVubnVtYmVyZWR9Cgo8YnIvPgo8aW1nIHNyYz0iaW1hZ2VzL3dheWZpbmRlci93YXlmaW5kZXIucG5nIiBhbHQ9IndheWZpbmRlciIgc3R5bGU9ImhlaWdodDogNDAwcHg7Ii8+Cjxici8+Cjxici8+CgojIEludHJvZHVjdGlvbgoKVGhlIGZpZWxkIG9mIHNpbmdsZS1jZWxsIGV4cHJlc3Npb24gbWVhc3VyZW1lbnRzIGlzIHN0aWxsIHJlbGF0aXZlbHkgbmV3IDwhLS0gYWRkIGxpbmtzIHRvIGVhcmx5IHB1YmxpY2F0aW9ucyAmIGluZm9ybWF0aW9uIHJlZ2FyZGluZyAxMHggY29tbWVyY2lhbGl6YXRpb24gLS0+IGFuZCB0aGVyZWZvcmUgIGJlc3QgcHJhY3RpY2VzIGZvciBhbmFseXNpcyBhbmQgc3RhbmRhcmRzIGZvciBwdWJsaWNhdGlvbiBhcmUgY29udGludWluZyB0byBldm9sdmUuIAoKT25lIG9mIHRoZSBnb2FscyBvZiB0aGlzIHdvcmtzaG9wIGlzIHRvIG5vdCBvbmx5IHByb3ZpZGUgYW4gZXhhbXBsZSBvZiBhIHN0YXJ0IHRvIGVuZCBzaW5nbGUtY2VsbCB3b3JrZmxvdyBidXQgYWxzbyBleHBsb3JlIHNvbWUgb2YgdGhlIHJlbGF0aXZlbHkgYXJiaXRyYXJ5IGRlY2lzaW9uIHBvaW50cyBhbmQgdGhlIHJhdGlvbmFsZSBmb3IgdGhlIGNob2ljZXMgd2UgaW5jbHVkZWQgaW4gb3VyIGFuYWx5c2lzLgoKIyMgU2FtcGxlIGluZm9ybWF0aW9uCgpJbiB0aGlzIHdvcmtzaG9wLCB3ZSB3aWxsIGJlIHdvcmtpbmcgd2l0aCBzaW5nbGUtY2VsbCBSTkEtc2VxIGRhdGEgZnJvbSBtaWNlIHdoZXJlIHRoZSBnb2FsIGlzIHRvIHVuZGVyc3RhbmQgbWlzcmVndWxhdGlvbiBpbiB3b3VuZCBoZWFsaW5nIHRoYXQgY2FuIGxlYWQgdG8gYm9uZSBmb3JtYXRpb24gaW4gc29mdCB0aXNzdWUuIE9mIGludGVyZXN0IGFyZSB0aGUgY2VsbCB0eXBlcyBhbmQgZ2VuZXMgdGhhdCBhcmUgaW52b2x2ZWQgaW4gdGhhdCBtaXNyZWd1bGF0aW9uLiBFc3NlbnRpYWxseSwgIldoeSBtaWdodCBib25lIGZvcm0gYXQgdGhlIGluanVyeSBzaWdodCB3aGVuIGl0IHNob3VsZG4ndD8iCgpUbyBpbnZlc3RpZ2F0ZSB0aGlzLCBjZWxscyBmcm9tIGRheSAwIChwcmlvciB0byBpbmp1cnkpLCBhbmQgZGF5cyAzLCA3LCBhbmQgMjEgcG9zdC1pbmp1cnkgd2VyZSBzdWJqZWN0ZWQgdG8gc2NSTkEtc2VxIGluIHF1YWRydXBsaWNhdGUgZm9yIGVhY2ggZGF5LiBJbiB0aGUgaW50ZXJlc3Qgb2YgY29tcHV0YXRpb25hbCBjb25zdHJhaW50cyBpbiB0aGlzIHdvcmtzaG9wLCB3ZSBoYXZlIG9taXR0ZWQgZGF5IDMuCgohW10oLi9pbWFnZXMvY3VycmljdWx1bS9leHBlcmltZW50YWxfZGVzaWduLmpwZykKCiMjIE9iamVjdGl2ZXMKCi0gT3JpZW50IG9uIFJTdHVkaW8uCi0gQ3JlYXRlIFJTdHVkaW8gcHJvamVjdCBmb3IgYW5hbHlzaXMuCi0gQ3JlYXRlIGRpcmVjdG9yeSBzdHJ1Y3R1cmUgZm9yIGFuYWx5c2lzLgotIExlYXJuIGhvdyB0byByZWFkIDEwWCBkYXRhIGludG8gU2V1cmF0LgotIEludHJvZHVjZSB0aGUgU2V1cmF0IG9iamVjdCwgYW5kIGhvdyB0byBhY2Nlc3MgcGFydHMgb2YgaXQuCgotLS0KCiMgT3JpZW50aW5nIG9uIFJTdHVkaW8KClRvIG9yaWVudCBvdXJzZWx2ZXMgb24gdGhlIGludGVyZmFjZSBvZiBSU3R1ZGlvLCBsb29rIGluIHRoZSBsb3dlciByaWdodCBwYW5lLCB0aGF0IGhhcyBhIGxpc3Qgb2YgZmlsZXMgYW5kIGZvbGRlcnMuIENsaWNrIG9uIHRoZSBgd2VsY29tZS5SYCBzY3JpcHQuCgpUaGVyZSBzaG91bGQgbm93IGJlIGZvdXIgcGFuZXMgaW4geW91ciBSU3R1ZGlvIHdpbmRvdywgd2l0aCB0aGUgYHdlbGNvbWUuUmAgc2NyaXB0IGluIHRoZSB1cHBlciBsZWZ0IHBhbmUsIHRoaXMgaXMgdGhlICJTb3VyY2UiIG9yICJTY3JpcHRzIiBwYW5lLiBJdCBkaXNwbGF5cyB0aGUgY29kZSB0aGF0IHdlIHdpbGwgd3JpdGUgdG8gcGVyZm9ybSBvdXIgYW5hbHlzaXMuCgo8IS0tIEluc2VydCBzY3JlZW5zaG90IHdpdGggd2VsY29tZS5SIGluIHNjcmlwdCBwYW5lLiAtLT4KCkluIHRoZSBTY3JpcHRzIHBhbmUsIHRoZXJlIGlzIGEgbGluZSBvZiBpY29ucywgdG93YXJkcyB0aGUgcmlnaHQgc2lkZSBvZiB0aGUgcGFuZSB0aGVyZSBpcyBhICJSdW4iIGJ1dHRvbi4gRmlyc3QgaGlnaGxpZ2h0IGFsbCB0aGUgY29kZSBpbiB0aGUgU291cmNlIHBhbmUsIGFuZCB0aGVuIGNsaWNrICJSdW4iLgoKPCEtLSBJbnNlcnQgc2NyZWVuc2hvdCBvZiB0aGUgcmVzdWx0IG9mIHJ1bm5pbmcgd2VsY29tZS5SIC0tPgoKKipDaGVja3BvaW50KioKCkEgbnVtYmVyIG9mIHRoaW5ncyBqdXN0IGhhcHBlbmVkIGluIGFsbCB0aGUgcGFuZXM6CgoxLiBUaGVyZSBpcyBhIHJlY29yZCBvZiB0aGUgY29kZSB0aGF0IHdhcyBydW4gYWxvbmcgd2l0aCB0aGUgcmVzdWx0cyBpbiB0aGUgbG93ZXIgbGVmdCBwYW5lLiBUaGlzIGlzIHRoZSAiQ29uc29sZSIgcGFuZWwsIGFuZCBoZXJlIGlzIHdoZXJlIHRoZSBvdXRwdXQgb2YgZXhlY3V0aW5nIGNvZGUgaXMgZGlzcGxheWVkLiBZb3UgY2FuIGFsc28gdHlwZSBkaXJlY3RseSBpbiB0aGUgcHJvbXB0IGFuZCBleGVjdXRlIGNvZGUsIGJ1dCBpdCBpcyBub3Qgc2F2ZWQgaW4gdGhlIHNjcmlwdC4KMi4gVGhlcmUgaXMgYSBgcGhlbm90eXBlc19ieV9zcGVjaWVzYCBvYmplY3QgbGlzdGVkIGluIHRoZSB1cHBlciByaWdodCBwYW5lLiBUaGlzIGlzIHRoZSAiRW52aXJvbm1lbnQiIHBhbmVsLCBhbmQgaXQgc2hvd3MgYWxsIHRoZSBleGlzdGluZyB2YXJpYWJsZXMgaW4gdGhlIHNlc3Npb24sIGFzIHdlbGwgYXMgYSBicmllZiBkZXNjcmlwdGlvbi4KMy4gVGhlcmUgaXMgYSBwbG90IGluIHRoZSBsb3dlciByaWdodCBwYW5lIHdoZXJlIHRoZSBmaWxlIHN0cnVjdHVyZSB3YXMgcHJldmlvdXNseSBsaXN0ZWQuIFRoaXMgaXMgdGhlICJGaWxlcyAvIFBsb3RzIC8gSGVscCIgcGFuZSwgYW5kIGl0IGNhbiBzaG93IHRoZSBmaWxlIGJyb3dzZXIgdGhhdCB3ZSBzYXcgYXQgdGhlIHN0YXJ0LCBkaXNwbGF5IHBsb3RzIHRoYXQgYXJlIGV4ZWN1dGVkIGluIHRoZSBDb25zb2xlLCBvciBkaXNwbGF5IGhlbHAgcGFnZXMgYXMgd2UnbGwgc2VlIGxhdGVyLgoKIyBQcm9qZWN0IHNldHVwCgpUbyBzdGFydCwgd2Ugd2lsbCBhY2Nlc3Mgb3VyIHNoYXJlZCBSU3R1ZGlvIHNlcnZlciBieSBvcGVuaW5nIGEgd2ViIGJyb3dzZXIgdG8gdGhlIGZvbGxvd2luZyBVUkw6CgpbaHR0cHM6Ly9iZngtd29ya3Nob3AwMi5tZWQudW1pY2guZWR1L10oaHR0cHM6Ly9iZngtd29ya3Nob3AwMi5tZWQudW1pY2guZWR1LykKCllvdSBzaG91bGQgbm93IGJlIGxvb2tpbmcgYXQgYSBwYWdlIHRoYXQgd2lsbCBhbGxvdyB5b3UgdG8gbG9naW4gdG8gdGhlIFJTdHVkaW8gc2VydmVyOgoKIVtJbWFnZTogTG9naW4gcGFnZSBmb3IgUlN0dWRpbyBzZXJ2ZXIuXShpbWFnZXMvY3VycmljdWx1bS9zZXJ2ZXJfbG9naW4ucG5nKQoKRW50ZXIgeW91ciB1c2VyIGNyZWRlbnRpYWxzIGFuZCBjbGljayA8a2JkPlNpZ24gSW48L2tiZD4uIFlvdXIgdXNlcm5hbWUgYW5kIHBhc3N3b3JkIHdlcmUgcHJvdmlkZWQgdmlhIGVtYWlsLCBidXQgaWYgeW91IG5lZWQgaGVscCwgYSBoZWxwZXIgY2FuIHJldHJpZXZlIGl0IGZvciB5b3UgaWYgeW91IGFzayBpbiBTbGFjay4gT25jZSBsb2dnZWQgaW4sIHlvdSBzaG91bGQgbm93IHNlZSB0aGUgUlN0dWRpbyBpbnRlcmZhY2U6CgohW0ltYWdlOiBMYW5kaW5nIHBhZ2UgYWZ0ZXIgc3VjY2Vzc2Z1bCBsb2dpbiB0byBSU3R1ZGlvIHNlcnZlci5dKGltYWdlcy9jdXJyaWN1bHVtL3JzdHVkaW9fbGFuZGluZy5wbmcpCgo8IS0tIGNvbnNpZGVyIGFkZGluZyB3ZWxjb21lIHNjcmlwdCBvciBleGFtcGxlIG9mIGZpbmFsIGdvYWw/LS0+CgojIyBDcmVhdGluZyBhIHByb2plY3QKCldlIHdpbGwgY3JlYXRlIGFuIFJTdHVkaW8gUHJvamVjdCB0aGF0IHdpbGwgaGVscCB1cyBrZWVwIG91ciBmaWxlcyBvcmdhbml6ZWQuIFNlZSB0aGUgW1Byb2plY3RzXShodHRwczovL3I0ZHMuaGFkbGV5Lm56L3dvcmtmbG93LXNjcmlwdHMuaHRtbCNwcm9qZWN0cykgc2VjdGlvbiBvZiBbUiBmb3IgRGF0YSBTY2llbmNlXShodHRwczovL3I0ZHMuaGFkbGV5Lm56LykgZm9yIGEgbW9yZSBpbi1kZXB0aCBkZXNjcmlwdGlvbiBvZiB3aGF0IGEgcHJvamVjdCBpcyBhbmQgaG93IGl0J3MgaGVscGZ1bC4KClRvIGNyZWF0ZSBhIFByb2plY3QgZm9yIHRoaXMgd29ya3Nob3AsIGNsaWNrIDxrYmQ+RmlsZTwva2JkPiB0aGVuIDxrYmQ+TmV3IFByb2plY3QuLi48L2tiZD4uIEluIHRoZSBOZXcgUHJvamVjdCBXaXphcmQgd2luZG93IHRoYXQgb3BlbnMsIHNlbGVjdCA8a2JkPkV4aXN0aW5nIERpcmVjdG9yeTwva2JkPiwgdGhlbiA8a2JkPkJyb3dzZS4uLjwva2JkPi4gSW4gdGhlIENob29zZSBEaXJlY3Rvcnkgd2luZG93LCBzZWxlY3QgdGhlIGBJU0NfUmAgZm9sZGVyIGJ5IGNsaWNraW5nIGl0IG9uY2UsIGFuZCB0aGVuIGNsaWNrIHRoZSA8a2JkPkNob29zZTwva2JkPiBidXR0b24uIEZpbmFsbHksIGNsaWNrIDxrYmQ+Q3JlYXRlIFByb2plY3Q8L2tiZD4uCgpPbmNlIHdlIGRvIHRoaXMsIFJTdHVkaW8gd2lsbCByZXN0YXJ0IGFuZCB0aGUgRmlsZXMgcGFuZSAobG93ZXIgcmlnaHQpIHNob3VsZCBwdXQgdXMgaW4gdGhlIGB+L0lTQ19SYCBmb2xkZXIgd2hlcmUgdGhlcmUgaXMgYW4gYGlucHV0cy9gIGZvbGRlciBhbmQgYW4gYElTQ19SLlJwcm9qYCBmaWxlLgoKIyMgRGlyZWN0b3J5IHN0cnVjdHVyZQoKV2UgaGF2ZSBpbmNsdWRlZCB0aGUgZGF0YSB0byBiZSB1c2VkIGluIHRoZSB3b3Jrc2hvcCBpbiB0aGUgYGlucHV0cy9gIGZvbGRlci4gSG93ZXZlciwgdGhlIHByb2plY3Qgd2lsbCBuZWVkIHRvIGluY2x1ZGUgZm9sZGVycyBmb3Igb3VyIGFuYWx5c2lzIGFuZCBvdXIgYW5hbHlzaXMgc2NyaXB0cy4gTGV0J3MgY3JlYXRlIHRoYXQgZGlyZWN0b3J5IHN0cnVjdHVyZSB3aXRoIHRoZSBgZGlyLmNyZWF0ZSgpYCBmdW5jdGlvbi4KCmBgYHtyLCBkaXJfY3JlYXRlfQojIGNyZWF0ZSBwcm9qZWN0IGRpcmVjdG9yaWVzIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KZGlyLmNyZWF0ZSgnc2NyaXB0cycsIHNob3dXYXJuaW5ncyA9IEZBTFNFLCByZWN1cnNpdmUgPSBUUlVFKQpkaXIuY3JlYXRlKCdyZXN1bHRzL2ZpZ3VyZXMnLCBzaG93V2FybmluZ3MgPSBGQUxTRSwgcmVjdXJzaXZlID0gVFJVRSkKZGlyLmNyZWF0ZSgncmVzdWx0cy90YWJsZXMnLCBzaG93V2FybmluZ3MgPSBGQUxTRSwgcmVjdXJzaXZlID0gVFJVRSkKZGlyLmNyZWF0ZSgncmVzdWx0cy9yZGF0YScsIHNob3dXYXJuaW5ncyA9IEZBTFNFLCByZWN1cnNpdmUgPSBUUlVFKQpgYGAKCkluIHRoZSBGaWxlcyBwYW5lIHdlIHNob3VsZCBzZWUgdGhlIG5ldyBgcmVzdWx0cy9gIGFuZCBgc2NyaXB0cy9gIGZvbGRlcnMuIAoKIyMgQW5hbHlzaXMgc2NyaXB0CgpUaGUgdHdvIG1vc3QgaW1wb3J0YW50IGFydGlmYWN0cyBvZiBvdXIgYW5hbHlzaXMgYXJlIHRoZSBkYXRhIGZyb20gQ2VsbCBSYW5nZXIsIGFuZCB0aGUgc2NyaXB0IHRvIGFuYWx5emUgdGhlIGRhdGEuIFRoZXJlIHdpbGwgYmUgb3V0cHV0cyBpbiBgcmVzdWx0cy9gLCBhbmQgdGhlc2Ugd2lsbCBiZSBpbXBvcnRhbnQsIGJ1dCBpZiB0aGUgY29udGVudHMgb2YgYHJlc3VsdHMvYCBhcmUgZXZlciBsb3N0LCB0aGUgc2NyaXB0IHdpbGwgYmUgYWJsZSB0byByZS1nZW5lcmF0ZSB0aGVtIGlmIHdlJ3ZlIGNhcHR1cmVkIGFsbCBvdXIgc3RlcHMgYXMgY29kZSwgd2hpY2ggd2UgYWltIHRvIGRvLgoKVG8gY3JlYXRlIHRoZSBhbmFseXNpcyBzY3JpcHQsIGNsaWNrIDxrYmQ+RmlsZTwva2JkPiwgaG92ZXIgb3ZlciA8a2JkPk5ldyBGaWxlPC9rYmQ+LCBhbmQgY2xpY2sgb24gPGtiZD5SIFNjcmlwdDwva2JkPi4gQSBuZXcgcGFuZSBpbiB0aGUgdXBwZXIgbGVmdCBzbGlkZXMgaW50byB2aWV3IGFuZCBpcyB0aGUgVW50aXRsZWQgc2NyaXB0IGZpbGUuIFNhdmUgdGhpcyBmaWxlLCBhbmQgbmFtZSBpdCwgYnkgY2xpY2tpbmcgPGtiZD5GaWxlPC9rYmQ+IHRoZW4gPGtiZD5TYXZlPC9rYmQ+LiBEb3VibGUgY2xpY2sgdGhlIGBzY3JpcHRzL2AgZm9sZGVyLCBhbmQgaW4gdGhlIEZpbGUgbmFtZTogdGV4dCBib3ggdHlwZSAiYW5hbHlzaXMuUiIuIFRoZW4gY2xpY2sgPGtiZD5TYXZlPC9rYmQ+LgoKQXMgd2UgcHJvY2VlZCB0aHJvdWdoIHRoZSB3b3Jrc2hvcCwgd2Ugc2hvdWxkIHNhdmUgdGhpcyBmaWxlIChieSBjbGlja2luZyB0aGUgRmxvcHB5IGRpc2ssIGNsaWNraW5nIDxrYmQ+RmlsZTwva2JkPiB0aGVuIDxrYmQ+U2F2ZTwva2JkPiwgb3IgYnkgdHlwaW5nIDxrYmQ+Q29udHJvbCArIFM8L2tiZD4pLgoKPiAqKkdvb2Qgc2NyaXB0aW5nIHByYWN0aWNlcyoqCj4gCj4gSW4gYW55IGFuYWx5c2lzIHNjcmlwdCwgd2UgcmVjb21tZW5kIHVzaW5nIGNvbW1lbnRzIChsaW5lcyBwcmVjZWRlZCBieSBhICIjIikgdG8gcHJvdmlkZSBhZGRpdGlvbmFsIGluZm9ybWF0aW9uIGFib3V0IGNvZGUgdGhhdCBtYXkgbm90IGJlIHNlbGYtZXZpZGVudC4gVGhpcyBpcyB0byB0aGUgYmVuZWZpdCBvZiBvdGhlcnMgdGhhdCBtYXkgbG9vayBhdCB0aGUgY29kZSwgYnV0IGFsc28gdG8geW91ciBmdXR1cmUtc2VsZi4KPGJyPgoKIyBBbmFseXNpcyBpbml0aWFsaXphdGlvbgoKV2UgYmVnaW4gb3VyIGFuYWx5c2lzIHNjcmlwdCBieSBsb2FkaW5nIHRoZSBsaWJyYXJpZXMgd2UgZXhwZWN0IHRvIHVzZS4gSXQncyBnZW5lcmFsbHkgZ29vZCBwcmFjdGljZSB0byBpbmNsdWRlIGFsbCBgbGlicmFyeSgpYCBjYWxscyBhdCB0aGUgdG9wIG9mIGEgc2NyaXB0IGZvciB2aXNpYmlsaXR5LgoKYGBge3IsIGxvYWRfbGlicmFyaWVzLCB3YXJuaW5nID0gRkFMU0UsIG1lc3NhZ2UgPSBGQUxTRX0KIyBsb2FkIGxpYnJhcmllcyAgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQpsaWJyYXJ5KFNldXJhdCkKbGlicmFyeShCUENlbGxzKQpsaWJyYXJ5KHRpZHl2ZXJzZSkKCm9wdGlvbnMoZnV0dXJlLmdsb2JhbHMubWF4U2l6ZSA9IDFlOSkKYGBgCgpUaGUgbGlicmFyaWVzIHRoYXQgd2UgYXJlIGxvYWRpbmcgYXJlOgoKLSBUaGUgYFNldXJhdGAgbGlicmFyeSwgZGV2ZWxvcGVkIGJ5IHRoZSBbU2F0aWphIGxhYl0oaHR0cHM6Ly9zYXRpamFsYWIub3JnLyksIHdoaWNoIHdpbGwgcHJvdmlkZSB0aGUgZXNzZW50aWFsIGZ1bmN0aW9ucyB1c2VkIGluIG91ciBzaW5nbGUtY2VsbCBhbmFseXNpcy4gVGhlIFtTZXVyYXQgZG9jdW1lbnRhdGlvbl0oaHR0cHM6Ly9zYXRpamFsYWIub3JnL3NldXJhdC8pIGlzIGV4dGVuc2l2ZSBhbmQgaW5kaXNwZW5zaWJsZS4KLSBUaGUgYEJQQ2VsbHNgIGxpYnJhcnksIGRldmVsb3BlZCBieSBbQmVuamFtaW4gUGFya3NdKGh0dHBzOi8vYm5wcmtzLmdpdGh1Yi5pby9CUENlbGxzL2F1dGhvcnMuaHRtbCNjaXRhdGlvbiksIGlzIGEgcmVjZW50IHBhY2thZ2Ugd2l0aCB0aGUgcHJpbWFyeSBnb2FsIG9mIGVmZmljaWVudGx5IHN0b3Jpbmcgc2luZ2xlLWNlbGwgZGF0YSB0byByZWR1Y2UgaXRzIG1lbW9yeSBmb290cHJpbnQuIFRoZSBbQlBDZWxscyBkb2N1bWVudGF0aW9uXShodHRwczovL2JucHJrcy5naXRodWIuaW8vQlBDZWxscy9pbmRleC5odG1sKSBpbmNsdWRlcyBtYW55IHVzZWZ1bCB0dXRvcmlhbHMuCi0gVGhlIGB0aWR5dmVyc2VgIGxpYnJhcnksIGRldmVsb3BlZCBieSBQb3NpdCwgaXMgYW4gZXNzZW50aWFsIHBhY2thZ2UgZm9yIGRhdGEgbWFuaXB1bGF0aW9uIGFuZCBwbG90dGluZy4gVGhlIFt0aWR5dmVyc2UgZG9jdW1lbnRhdGlvbl0oaHR0cHM6Ly93d3cudGlkeXZlcnNlLm9yZy8pIGlzIGVzc2VudGlhbCBmb3IgZ2V0dGluZyBhIGhhbmRsZSBvbiB0aGUgYXJyYXkgb2YgZnVuY3Rpb25zIGluIHRoZSBtYW55IHBhY2thZ2VzIGNvbnRhaW5lZCB0aGVyZWluLgoKIyBJbnB1dCBkYXRhCgpUaGUgYGlucHV0cy9gIGZvbGRlciBoYXMgdGhlIGRhdGEgZm9yIHRoZSB3b3Jrc2hvcCBzdG9yZWQgaW4gdHdvIGZvcm1zLiBUaGUgZmlyc3QsIGBpbnB1dHMvMTB4X2ZpbHRlcmVkL2AgaXMgY2xvc2VyIHRvIHdoYXQgQUdDIHdvdWxkIGdlbmVyYXRlIHdpdGggQ2VsbCBSYW5nZXIsIHdoZXJlIGVhY2ggc2FtcGxlIGhhcyBhIGZvbGRlciwgYW5kIHdpdGhpbiB0aGF0IGZvbGRlciB0aGVyZSBhcmUgdGhyZWUgZmlsZXM6CgotIGBiYXJjb2Rlcy50c3YuZ3pgCi0gYGZlYXR1cmVzLnRzdi5nemAKLSBgbWF0cml4Lm10eC5nemAKCk5vdGUsIHdlIHdpbGwgYmUgdXNpbmcgdGhlIGZpbHRlcmVkIG1hdHJpY2VzLgoKPCEtLSBXZXJlIHRoZXNlIGZpbGVzIGV4cGxhaW5lZCBlYXJsaWVyPyBJZiBub3QsIGJyaWVmbHkgZXhwbGFpbiB0aGVtIGhlcmUgLS0+CgpUaGUgc2Vjb25kLCBgaW5wdXRzLzEweF9tYXRfZmlsdGVyZWQvYCBpcyB0aGUgcmVzdWx0IG9mIHRoZSBgQlBDZWxsc2AgcGFja2FnZSwgYW5kIGlzIG1vcmUgbWFjaGluZS1yZWFkYWJsZSB0aGFuIGh1bWFuLXJlYWRhYmxlLiBJdCBpcyBhbiBlZmZpY2llbnQgd2F5IG9mIHN0b3JpbmcgdGhlIHNhbWUgZGF0YSBjb250YWluZWQgaW4gdGhlIHRocmVlIGZpbGVzIGFib3ZlLiBXZSB3aWxsIHVzZSB0aGlzIGZvcm0gb2YgdGhlIGlucHV0IGRhdGEgYmVjYXVzZSBpdCBpcyBtb3JlIG1lbW9yeSBlZmZpY2llbnQuCgpXaGlsZSB0aGUgZnVsbCBkYXRhc2V0IHdlIHNlbGVjdGVkIGhhcyB0aW1lLXNlcmllcyBpbmZvcm1hdGlvbiBmcm9tIERheSAwLCBEYXkgMywgRGF5IDcsIGFuZCBEYXkgMjEsIHdlIGhhdmUgcmVtb3ZlZCBEYXkgMyB0byByZWR1Y2UgdGhlIG1lbW9yeSByZXF1aXJlbWVudHMgZnVydGhlci4KCjwhLS0gQWRkIGNvbnRleHQgZm9yIGV4cGVjdGVkIDEweCBvdXRwdXRzIGFuZCBob3cgd2Ugd291bGQgdXN1YWxseSBzdGFydCB3aXRoIHRoZSAiZmlsdGVyZWQiIG91dHB1dHMgKGFuZCBhZGQgZHJvcGRvd24gb3IgbGluayBvdXQgdG8gMTB4IHJlc291cmNlcyB0byBjb250cmFzdCBiZXR3ZWVuIGZpbHRlcmVkIGFuZCByYXcgb3V0cHV0cyBhbmQgdXNlIGNhc2VzIGZvciBlYWNoKSAtLT4KCiMgQ3JlYXRlIGEgU2V1cmF0IG9iamVjdAoKVGhlIG1vc3QgcmVjZW50IHJlbGVhc2Ugb2YgYFNldXJhdGAsIHZlcnNpb24gNSwgaW5jbHVkZXMgY2hhbmdlcyB3aGljaCB0YWtlIGFkdmFudGFnZSBvZiB0aGUgbWVtb3J5LWVmZmljaWVudCBzdG9yYWdlIGltcGxlbWVudGVkIGluIGBCUENlbGxzYC4gVG8gcmVhZCB0aGUgZWZmaWNpZW50bHkgc3RvcmVkIGRhdGEgd2l0aCBgQlBDZWxsc2Agd2Ugd2lsbCB1c2UgdGhlIGBvcGVuX21hdHJpeF9kaXIoKWAgZnVuY3Rpb24uCgo8IS0tIEludHJvZHVjZSBCUENlbGwgcGFja2FnZSBhbmQgaG93IG1vc3QgcmVjZW50IHZlcnNpb24gb2YgU2V1cmF0IChTZXVyYXQgNSkgc3VwcG9ydHMgbW9yZSBlZmZpY2llbnQgZGF0YSBzdG9yYWdlIHRvIGltcHJvdmUgcGVyZm9ybWFuY2UgYW5kIGFjY29tb2RhdGUgbGFyZ2VyIGRhdGFzZXRzIC0tPgoKYGBge3IsIHJlYWRfbWF0cml4X2Rpcn0KIyBUaGlzIHB1dHMgdGhlIGRhdGEgIm9uIGRpc2siIHJhdGhlciB0aGFuIGluIG1lbW9yeSIgIC0tLS0tLQpnZW9fbWF0ID0gb3Blbl9tYXRyaXhfZGlyKGRpciA9ICdpbnB1dHMvMTB4X21hdF9maWx0ZXJlZCcpCmBgYAoKVGhpcyByZWFkcyBpbiB0aGUgZXhwcmVzc2lvbiBtYXRyaXggd2hpY2ggaGFzIGdlbmVzIGFzIHJvd3MgYW5kIGNlbGxzIGFzIGNvbHVtbnMuIFRoZSBleHByZXNzaW9uIG1hdHJpeCBpcyB0aGUgcHJlY3Vyc29yIHRvIGNyZWF0aW5nIHRoZSBgU2V1cmF0YCBvYmplY3QgdXBvbiB3aGljaCBhbGwgb3VyIGFuYWx5c2lzIHdpbGwgYmUgZG9uZS4gVG8gY3JlYXRlIHRoZSBgU2V1cmF0YCBvYmplY3Q6CgpgYGB7ciwgY3JlYXRlX3NldXJhdH0KIyBjcmVhdGUgc2V1cmF0IG9iamVjdCAgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQpnZW9fc28gPSBDcmVhdGVTZXVyYXRPYmplY3QoY291bnRzID0gZ2VvX21hdCwgbWluLmNlbGxzID0gMSwgbWluLmZlYXR1cmVzID0gNTApCmdlb19zbwpgYGAKCldlIGhhdmUgc3BlY2lmaWVkIHNvbWUgcGFyYW1ldGVycyB0byByZW1vdmUgZ2VuZXMgYW5kIGNlbGxzIHdoaWNoIGRvIG5vdCBjb250YWluIHZlcnkgbXVjaCBpbmZvcm1hdGlvbi4gU3BlY2lmaWNhbGx5IGEgZ2VuZSBpcyByZW1vdmVkIGlmIGl0IGlzIGV4cHJlc3NlZCBpbiAxIG9yIGZld2VyIGNlbGxzLCBhbmQgYSBjZWxsIGlzIHJlbW92ZWQgaWYgaXQgY29udGFpbnMgcmVhZHMgZm9yIDUwIG9yIGZld2VyIGdlbmVzLiBJbiB0aGUgY29udGV4dCBvZiB0aGlzIHdvcmtzaG9wLCB0aGlzIGhlbHBzIHVzIG1pbmltaXplIG1lbW9yeSB1c2FnZS4KCjxkZXRhaWxzPgo8c3VtbWFyeT4qUmVhZGluZyBpbiBkYXRhIGZyb20gc2NyYXRjaCo8L3N1bW1hcnk+CgpBYm92ZSwgd2UndmUgZGVtb25zdHJhdGVkIGhvdyB0byByZWFkIGRhdGEgdGhhdCB3YXMgYWxyZWFkeSBhcnJhbmdlZCBpbiB0aGUgYEJQQ2VsbHNgIG1hbm5lci4gV2UgaGF2ZSBkb25lIHRoaXMgZm9yIHRoZSB3b3Jrc2hvcCB0byByZWR1Y2Ugb3VyIG1lbW9yeSBmb290cHJpbnQgZnJvbSB0aGUgc3RhcnQsIGJ1dCB3aGVuIHlvdSBnZXQgZGF0YSBiYWNrIGZyb20gQUdDLCB5b3Ugd2lsbCBoYXZlIHRvIGZvbGxvdyB0aGUgc3RlcHMgYmVsb3cuCgpgYGAKIyBUbyBsb2FkIGRhdGEgZnJvbSByYXcgZmlsZXMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQojIyMgRE8gTk9UIFJVTiAjIyMKCiMgQ29sbGVjdCB0aGUgZGlyZWN0b3JpZXMgY29udGFpbmluZyB0aGUgMyBmaWxlczoKIyBiYXJjb2Rlcy50c3YuZ3osIGZlYXR1cmVzLnRzdi5neiwgbWF0cml4Lm10eC5negojIFRoZSBbLTFdIGRyb3BzIHRoZSBwYXJlbnQgZGlyZWN0b3J5IGlucHV0cy8xMHhfYW5hbHlzaXMKc2FtcGxlX2RpcnMgPSBsaXN0LmRpcnMoJ2lucHV0cy8xMHhfYW5hbHlzaXMnKVstMV0KCiMgRXh0cmFjdCB0aGUgc2FtcGxlIG5hbWVzLiBOT1RFLCB0aGlzIHdpbGwgZGlmZmVyIGRlcGVuZGluZwojIG9uIHRoZSBmb3JtIHRoZSBmb2xkZXIgbmFtZXMgdGFrZSwgdGhpcyB3b3JrcyBmb3IgdGhpcyBkYXRhLgojIFdlIGNyZWF0ZSBhIG5hbWVkIHZlY3RvciAKc2FtcGxlcyA9IHN0cl9zcGxpdChiYXNlbmFtZShzYW1wbGVfZGlycyksIHBhdHRlcm4gPSAnXycsIHNpbXBsaWZ5ID0gVFJVRSlbLDJdCgojIE5hbWluZyB0aGUgc2FtcGxlX2RpcnMgdmVjdG9yIG1ha2VzIFNldXJhdCBuYW1lIHRoZQojIHNhbXBsZXMgaW4gdGhlIGNvcnJlc3BvbmRpbmcgbWFubmVyLCB3aGljaCBpcyBuaWNlIGZvciB1cy4KbmFtZXMoc2FtcGxlX2RpcnMpID0gc2FtcGxlcwoKIyBDcmVhdGUgdGhlIGV4cHJlc3Npb24gbWF0cml4Cmdlb19tYXQgPSBSZWFkMTBYKGRhdGEuZGlyID0gc2FtcGxlX2RpcnMpCmBgYAoKVGhpcyB3aWxsIGdlbmVyYXRlIHRoZSBleHByZXNzaW9uIG1hdHJpeCB0aGF0IGlzIHRoZSBpbnB1dCB0byBgQ3JlYXRlU2V1cmF0T2JqZWN0KClgLCBhcyBhYm92ZS4gSWYgeW91IHdhbnRlZCB0byB3cml0ZSB0aGlzIGV4cHJlc3Npb24gbWF0cml4IHVzaW5nIGBCUENlbGxzYCBzbyB0aGF0IGl0IGNvdWxkIGJlIHVzZWQgaW4gdGhlIG1vcmUgbWVtb3J5LWVmZmljaWVudCBtYW5uZXIsIHlvdSB3b3VsZCBkbzoKCmBgYAp3cml0ZV9tYXRyaXhfZGlyKG1hdCA9IGdlb19tYXQsIGRpciA9ICdpbnB1dHMvMTB4X21hdF9maWx0ZXJlZCcpCmBgYAoKWW91J2QgdGhlbiBoYXZlIHRoZSBpdGVtcyBuZWVkZWQgdG8gcnVuIHRoZSBjb2RlIHdlJ3ZlIGFscmVhZHkgcnVuLgo8L2RldGFpbHM+Cjxicj4KCiMjIFN0cnVjdHVyZSBvZiBhIFNldXJhdCBvYmplY3QKClRoZSBgU2V1cmF0YCBvYmplY3QgaXMgYSBjb21wbGV4IGRhdGEgdHlwZSwgc28gbGV0J3MgZ2V0IGEgYmlyZHMgZXllIHZpZXcgd2l0aCBhbiBpbWFnZSBmcm9tIFt0aGlzIHR1dG9yaWFsXShodHRwczovL3N3YmlvaW5mLmdpdGh1Yi5pby9zY1JOQXNlcUluUl9Eb2NvL3NldXJhdG9iamVjdC5odG1sI2Rpc2N1c3Npb24tdGhlLXNldXJhdC1vYmplY3QtaW4tcikgb24gc2luZ2xlLWNlbGwgYW5hbHlzaXMuCgohW0ltYWdlOiBTY2hlbWF0aWMgb2YgYFNldXJhdGAgb2JqZWN0Ll0oaW1hZ2VzL2N1cnJpY3VsdW0vc2V1cmF0X29iamVjdC5wbmcpCgpUaGUgdGhyZWUgbWFpbiAic2xvdHMiIGluIHRoZSBvYmplY3QgYXJlOgoKMS4gVGhlIGBhc3NheXNgIHNsb3Qgc3RvcmVzIHRoZSBleHByZXNzaW9uIGRhdGEgYXMgYEFzc2F5YCBvYmplY3RzLgoyLiBUaGUgYG1ldGEuZGF0YWAgc2xvdCB3aGljaCBzdG9yZXMgY2VsbC1sZXZlbCBpbmZvcm1hdGlvbiwgaW5jbHVkaW5nIHRlY2huaWNhbCBhbmQgcGhlbm90eXBpYyBkYXRhLgozLiBUaGUgYHJlZHVjdGlvbnNgIHNsb3Qgc3RvcmVzIHRoZSByZXN1bHRzIG9mIGRpbWVuc2lvbiByZWR1Y3Rpb24gYXBwbGllZCB0byB0aGUgYGFzc2F5c2AuCgpUaGVyZSBhcmUgb3RoZXIgc2xvdHMgd2hpY2ggc3RvcmUgaW5mb3JtYXRpb24gdGhhdCBiZWNvbWVzIHJlbGV2YW50IHdoZW4gaWRlbnRpZnlpbmcgY2x1c3RlcnMgb2YgY2VsbHM6IGBncmFwaHNgIGFuZCBgbmVpZ2hib3JzYC4gVGhlcmUgYXJlIHNsb3RzIHJlbGF0ZWQgdG8gc3BhdGlhbCBhbmFseXNpczogYGltYWdlc2AuIFRoZXJlIGFyZSBhbHNvIHNsb3RzIHdoaWNoIHRyYWNrIHdoYXQgaGFzIGJlZW4gZG9uZSB0byB0aGUgb2JqZWN0OiBgY29tbWFuZHNgLgoKIyMjIExheWVycyBvZiBhIFNldXJhdCBvYmplY3QKClRoZSBgYXNzYXlzYCBpbiBhIFNldXJhdCB2NSBvYmplY3Qgc3RvcmUgZGF0YSBpbiBsYXllcnMuIExheWVycyBjYW4gc3RvcmUgcmF3LCB1bi1ub3JtYWxpemVkIGNvdW50cyAoYGxheWVyID0gJ2NvdW50cydgKSwgbm9ybWFsaXplZCBkYXRhIChgbGF5ZXIgPSAnZGF0YSdgKSwgb3Igei1zY29yZWQvdmFyaWFuY2Utc3RhYmlsaXplZCBkYXRhIChgbGF5ZXIgPSAnc2NhbGUuZGF0YSdgKS4gV2Ugd2lsbCBjb21lIGJhY2sgdG8gdGhlIGlkZWEgb2YgdGhlc2UgbGF5ZXJzIHdoZW4gd2UgcGVyZm9ybSBub3JtYWxpemF0aW9uIGFuZCB2YXJpYW5jZS1zdGFiaWxpemF0aW9uIGxhdGVyLgoKQXMgaW4gYnVsayBSTkEtc2VxLCB0aGUgZGF0YSBvZiBpbnRlcmVzdCBpcyBzdG9yZWQgYXMgYSBjb3VudCBtYXRyaWNlcywgYnV0IGluc3RlYWQgb2YgdGhlIGNvdW50cyBiZWluZyBhdCB0aGUgc2FtcGxlIGxldmVsLCB0aGV5IGFyZSB0aGUgKipjZWxsKiogbGV2ZWwuCgojIyBBY2Nlc3NpbmcgcGFydHMgb2YgdGhlIG9iamVjdAoKVGhlIG9ubHkgc2xvdCBvZiB0aGUgYFNldXJhdGAgb2JqZWN0IHRoYXQgd2UnbGwgdHlwaWNhbGx5IGFjY2VzcyBvciBtb2RpZnkgYnkgaGFuZC0tdGhhdCBpcywgd2l0aG91dCBhIGZ1bmN0aW9uIGZyb20gdGhlIGBTZXVyYXRgIHBhY2thZ2UtLWlzIHRoZSBgbWV0YS5kYXRhYCBvYmplY3QuIEluIFIsIHNsb3RzIGFyZSBhY2Nlc3NlZCB3aXRoIHRoZSBgQGAgc3ltYm9sLCBhcyBpbjoKCmBgYHtyLCBwcmV2aWV3X21ldGFkYXRhfQojIEV4YW1pbmUgc2V1cmF0IG9iamVjdCAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCmhlYWQoZ2VvX3NvQG1ldGEuZGF0YSkKYGBgCgpIZXJlLCBlYWNoIHJvdyBpcyBhIGNlbGwsIGFuZCBlYWNoIGNvbHVtbiBpcyBpbmZvcm1hdGlvbiBhYm91dCB0aGF0IGNlbGwuIFRoZSByb3dzIG9mIHRoZSB0YWJsZSBhcmUgbmFtZWQgYWNjb3JkaW5nIHRvIHRoZSB1bmlxdWVseSBpZGVudGlmaWFibGUgbmFtZSBmb3IgdGhlIGNlbGwuIEluIHRoaXMgY2FzZSwgdGhlIGRheSBhbmQgcmVwbGljYXRlLCBhcyB3ZWxsIGFzIHRoZSBiYXJjb2RlIGZvciB0aGF0IGNlbGwuIEFzIHdlIGNvbnRpbnVlIHRoZSB3b3Jrc2hvcCwgd2Ugd2lsbCBjaGVjayBpbiBvbiB0aGUgYG1ldGEuZGF0YWAgc2xvdCBhbmQgb2JzZXJ2ZSBjaGFuZ2VzIHdlIHdhbnQgdG8gbWFrZSwgYW5kIHRoYXQgb3RoZXIgZnVuY3Rpb25zIHdpbGwgbWFrZS4gV2UnbGwgYWxzbyBvYnNlcnZlIHRoZSBvdGhlciBhc3NheXMgYW5kIGxheWVycyBhbmQgbm90ZSB0aGVpciBjaGFuZ2VzLgoKIyBTYXZlIG91ciBwcm9ncmVzcwoKTGV0J3MgU2F2ZSBvdXIgcHJvZ3Jlc3MgYXMgYW4gUkRTIGZpbGUgd2l0aCBgc2F2ZVJEUygpYDsgdGhpcyBhbGxvd3MgdXMgdG8gaGF2ZSBhIGNvcHkgb2YgdGhlIG9iamVjdCB0aGF0IHdlIGNhbiByZWFkIGJhY2sgaW50byBvdXIgc2Vzc2lvbiB3aXRoIHRoZSBgcmVhZFJEUygpYCBjb21tbWFuZC4gUGVyaW9kaWNhbGx5IHdlIHdpbGwgYmUgc2F2aW5nIG91ciBTZXVyYXQgb2JqZWN0IHNvIHRoYXQgd2UgY2FuIGhhdmUgYSB2ZXJzaW9uIG9mIGl0IGF0IGRpZmZlcmVudCBzdGVwcyBvZiB0aGUgYW5hbHlzaXMuIFRoZXNlIHdpbGwgYWxzbyBoZWxwIHVzIGdldCB1bnRhbmdsZWQgaWYgd2UgZ2V0IGludG8gYW4gb2RkIHN0YXRlLgoKYGBge3IsIHNhdmVfcmRzX2hpZGRlbiwgZWNobyA9IEZBTFNFfQppZighZmlsZS5leGlzdHMoJ3Jlc3VsdHMvcmRhdGEvZ2VvX3NvX3VuZmlsdGVyZWQucmRzJykpIHsKICBzYXZlUkRTKGdlb19zbywgZmlsZSA9ICdyZXN1bHRzL3JkYXRhL2dlb19zb191bmZpbHRlcmVkLnJkcycpCn0KYGBgCgpgYGB7ciwgc2F2ZV9yZHMsIGV2YWwgPSBGQUxTRX0KIyBTYXZlIHRoZSBzZXVyYXQgb2JqZWN0IC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0Kc2F2ZVJEUyhnZW9fc28sIGZpbGUgPSAncmVzdWx0cy9yZGF0YS9nZW9fc29fdW5maWx0ZXJlZC5yZHMnKQpgYGAKCiMgU3VtbWFyeQoKSW4gdGhpcyBzZWN0aW9uIHdlOgoKLSBDcmVhdGVkIGFuIFJTdHVkaW8gcHJvamVjdCBmb3IgYW5hbHlzaXMuCi0gQ3JlYXRlZCB0aGUgZGlyZWN0b3J5IHN0cnVjdHVyZSBmb3IgYW5hbHlzaXMuCi0gTGVhcm5lZCBob3cgdG8gcmVhZCAxMFggZGF0YSBpbnRvIFNldXJhdC4KLSBJbnRyb2R1Y2VkIHRoZSBTZXVyYXQgb2JqZWN0LCBhbmQgaG93IHRvIGFjY2VzcyBwYXJ0cyBvZiBpdC4KCi0tLS0KClRoZXNlIG1hdGVyaWFscyBoYXZlIGJlZW4gYWRhcHRlZCBhbmQgZXh0ZW5kZWQgZnJvbSBtYXRlcmlhbHMgbGlzdGVkIGFib3ZlLiBUaGVzZSBhcmUgb3BlbiBhY2Nlc3MgbWF0ZXJpYWxzIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUgW0NyZWF0aXZlIENvbW1vbnMgQXR0cmlidXRpb24gbGljZW5zZSAoQ0MgQlkgNC4wKV0oaHR0cDovL2NyZWF0aXZlY29tbW9ucy5vcmcvbGljZW5zZXMvYnkvNC4wLyksIHdoaWNoIHBlcm1pdHMgdW5yZXN0cmljdGVkIHVzZSwgZGlzdHJpYnV0aW9uLCBhbmQgcmVwcm9kdWN0aW9uIGluIGFueSBtZWRpdW0sIHByb3ZpZGVkIHRoZSBvcmlnaW5hbCBhdXRob3IgYW5kIHNvdXJjZSBhcmUgY3JlZGl0ZWQuCgo8YnIvPgo8YnIvPgoKLS0tLS0tLS0tLS0tLS0tCgp8IFtQcmV2aW91cyBsZXNzb25dKDAwQS1PcmllbnRpbmdPblNjUk5BU2VxLmh0bWwpIHwgW1RvcCBvZiB0aGlzIGxlc3Nvbl0oI3RvcCkgfCBbTmV4dCBsZXNzb25dKDAwQi1DZWxsUmFuZ2VySW5BY3Rpb24uaHRtbCkgfAp8IDotLS0gfCA6LS0tLTogfCAtLS06IHwKCg==</div>


</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->
<script>
$(document).ready(function () {
  window.initializeSourceEmbed("01-GettingStarted.Rmd");
});
</script>

<script>
$(document).ready(function ()  {

    // temporarily add toc-ignore selector to headers for the consistency with Pandoc
    $('.unlisted.unnumbered').addClass('toc-ignore')

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2,h3,h4",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_');
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = true;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
